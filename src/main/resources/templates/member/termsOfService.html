<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head>
    <title>회원가입</title>
    <style>
        .agreement-section {
            border: 1px solid #e0e0e0;
            padding: 20px;
            margin-bottom: 20px;
            background-color: #f9f9f9;
        }

        .agreement-section h5 {
            font-weight: bold;
        }

        .modal-body {
            max-height: 400px;
            overflow-y: auto;
        }

        .btn-container {
            display: flex;
            justify-content: space-between;
        }

        .btn-disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
    </style>
</head>
<body>
<div layout:fragment="main" class="page-body">

    <section class="ftco-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 text-center mb-5">
                    <h2 class="heading-section">이용약관</h2>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <form th:action = "@{/member/registMember}" id="signup-form" onsubmit="return validateForm()">
                        <!-- 모두 동의 체크박스 추가 -->
                        <div class="agreement-section">
                            <h5>모든 약관에 동의합니다(필수)</h5>
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="agree-all">
                                <label class="form-check-label" for="agree-all">
                                    모두 동의합니다
                                </label>
                            </div>
                        </div>

                        <!-- 약관 동의 -->
                        <div class="agreement-section">
                            <h5>이용약관 동의(필수)</h5>
                            <textarea class="form-control" rows="3" readonly>이용약관 내용</textarea>
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="agree-terms">
                                <label class="form-check-label" for="agree-terms">
                                    동의합니다
                                </label>
                            </div>
                        </div>
                        <div class="agreement-section">
                            <h5>개인정보 수집 및 이용에 대한 안내(필수)</h5>
                            <textarea class="form-control" rows="3" readonly>개인정보 수집 및 이용에 대한 안내 내용</textarea>
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="agree-privacy">
                                <label class="form-check-label" for="agree-privacy">
                                    동의합니다
                                </label>
                            </div>
                        </div>
                        <div class="agreement-section">
                            <h5>위치정보 이용약관 동의(필수)</h5>
                            <textarea class="form-control" rows="3" readonly>위치정보 이용약관 내용</textarea>
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="agree-location">
                                <label class="form-check-label" for="agree-location">
                                    동의합니다
                                </label>
                            </div>
                        </div>

                        <div class="d-flex justify-content-around">
                            <button type="button" th:onclick="|location.href='@{/member/login}'|"
                                    class="btn btn-secondary p-2 flex-fill">취소
                            </button>

                            <button type="submit" id="next-button" class="btn btn-success p-2 flex-fill">다음</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen">
        <svg class="circular" width="48px" height="48px">
            <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
            <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                    stroke="#F96D00"/>
        </svg>
    </div>
    <script>
        document.getElementById('agree-all').addEventListener('change', function () {
            const isChecked = this.checked;
            document.getElementById('agree-terms').checked = isChecked;
            document.getElementById('agree-privacy').checked = isChecked;
            document.getElementById('agree-location').checked = isChecked;
        });

        document.querySelectorAll('.form-check-input').forEach(item => {
            item.addEventListener('change', updateAgreeAllCheckbox);
        });

        function updateAgreeAllCheckbox() {
            const agreeAllCheckbox = document.getElementById('agree-all');
            const agreeTerms = document.getElementById('agree-terms').checked;
            const agreePrivacy = document.getElementById('agree-privacy').checked;
            const agreeLocation = document.getElementById('agree-location').checked;

            if (!agreeTerms || !agreePrivacy || !agreeLocation) {
                agreeAllCheckbox.checked = false;
            } else {
                agreeAllCheckbox.checked = true;
            }
        }

        function validateForm() {
            const agreeTerms = document.getElementById('agree-terms').checked;
            const agreePrivacy = document.getElementById('agree-privacy').checked;
            const agreeLocation = document.getElementById('agree-location').checked;

            if (agreeTerms && agreePrivacy && agreeLocation) {
                return true;  // 회원 등록 폼으로 넘어갑니다.
            } else {
                alert('모든 이용 약관에 동의해주세요!');
                return false;  // 모든 체크박스가 체크되어있지 않으면, 다음으로 넘어가지 않습니다.
            }
        }
    </script>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


</body>
</html>
