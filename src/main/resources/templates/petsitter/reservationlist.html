<!doctype html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout/default}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>예약 리스트</title>
</head>
<body>
<div class="container" layout:fragment="main">
    <section class="hero-wrap hero-wrap-2" style="background-image: url('/images/bg_2.jpg');"
             data-stellar-background-ratio="0.5">
        <div class="overlay"></div>
        <div class="container">
            <div class="row no-gutters slider-text align-items-end">
                <div class="col-md-9 ftco-animate pb-5">
                    <p class="breadcrumbs mb-2"><span class="mr-2"><a th:href="@{/}">Home  <i
                            class="ion-ios-arrow-forward"></i></a></span>
                        <span>펫시터
							<i class="ion-ios-arrow-forward"></i>
						</span>
                    </p>
                    <h1 class="mb-0 bread">예약 리스트</h1>
                </div>
            </div>
        </div>
    </section>

    <table class="table" style="text-align: center">
        <thead>
        <tr>
            <th></th>
            <th>주문회원</th>
            <th>요청 날짜</th>
            <th>예약 날짜</th>
            <th>시작, 종료</th>
            <th>금액</th>
            <th>수락, 취소</th>
            <th>상태</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="info , stat : ${reservationDtoList}" th:object="${reservationDtoList}">
<!--            [[${info.partnerOrderId}]]-->
            <form id="reservationForm" method="post" th:object="${info}">
                <label>
                    <input type="hidden" th:value="${info.partnerOrderId}" name="partnerOrderId">
                </label>
                <td>
                    <a th:href="@{|/petsitter/reservationdetail/${info.partnerOrderId}|}"
                       onclick="window.open(this.href, '_blank', 'left=2000%,top=800%, width=900, height=700'); return false;">자세히</a>
                </td>
                <td><span th:text="${info.memberId}" name="memberId"></span></td>
                <td><span th:text="${#temporals.format(info.createdAt, 'yyyy-MM-dd/a hh:mm')}" name="createdAt"></span>
                </td>
                <td><span th:text="${info.reservationDay}" name="reservationDay"></span></td>
                <td>
                    <span th:text="${info.startTime}" name="startTime"></span>
                    <span th:text="${info.endTime}" name="endTime"></span>
                </td>
                <td>
                    <span th:text="${#numbers.formatInteger(info.total_amount, 3, 'COMMA')}"></span>
                    <!--                    <div th:each="sizehowmany:${info.petSizeAndHowManyPets}" >-->
                    <!--                        <span th:text="${sizehowmany.petSize}" name="petSize"></span>-->
                    <!--                        <span th:text="${sizehowmany.howManyPet}"></span>-->
                    <!--                    </div>-->
                </td>
                <td>
                    <div th:block th:if="${info.reservationStatus.getReservationStatus()} != 'cancel'">
                        <button type="submit" id="readyButton" th:formaction="@{/petsitter/reservationOk}"
                                class="btn btn-primary" th:if="${info.reservationStatus.getReservationStatus()} == 'ready'" th:text="요청승인"></button>
                        <button type="submit" id="cancelButton" class="btn btn-danger" th:formaction="@{/petsitter/reservationCancel}">요청취소
                        </button>
                    </div>
                </td>
                <td>
                    <span th:if="${info.reservationStatus.getReservationStatus()} == 'ready'" th:text="요청대기"></span>
                    <span th:if="${info.reservationStatus.getReservationStatus()} == 'cancel'" th:text="요청취소"></span>
                </td>
            </form>
        </tr>
        </tbody>
    </table>

</div>
</body>
</html>